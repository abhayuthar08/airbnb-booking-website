<% layout("/layouts/boilerplate") %>

<% if (!allListings || allListings.length === 0) { %>
  <div style="color: red; font-weight: bold;">No listings found!</div>
<% } %>

<!-- Filter Bar -->
<div id="filters" style="display: flex; flex-wrap: wrap; gap: 2rem; justify-content: center; align-items: center; margin: 2rem 0 1rem 0;">
  <a href="/listings?filter=beachfront" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-umbrella-beach"></i></div>
    <div style="font-size:1rem;">Beachfront</div>
  </a>
  <a href="/listings?filter=pet" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-dog"></i></div>
    <div style="font-size:1rem;">Pet Friendly</div>
  </a>
  <a href="/listings?filter=family" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-children"></i></div>
    <div style="font-size:1rem;">Family Friendly</div>
  </a>
  <a href="/listings?filter=villa" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-hotel"></i></div>
    <div style="font-size:1rem;">Villas</div>
  </a>
  <a href="/listings?filter=unique" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-tree"></i></div>
    <div style="font-size:1rem;">Unique Stays</div>
  </a>
  <a href="/listings?filter=luxury" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-gem"></i></div>
    <div style="font-size:1rem;">Luxury</div>
  </a>
  <a href="/listings?filter=budget" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-wallet"></i></div>
    <div style="font-size:1rem;">Budget</div>
  </a>
  <a href="/listings?filter=ski" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-skiing"></i></div>
    <div style="font-size:1rem;">Skiing</div>
  </a>
  <a href="/listings?filter=parks" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-mountain"></i></div>
    <div style="font-size:1rem;">National Parks</div>
  </a>
  <a href="/listings?filter=workspace" class="filter-link" style="text-decoration:none; color:inherit; text-align:center;">
    <div style="font-size:2rem;"><i class="fa-solid fa-laptop-house"></i></div>
    <div style="font-size:1rem;">Workspaces</div>
  </a>
</div>

<style>
    #filters{
        margin-top: 1rem;
        display: flex;
        flex-wrap: wrap;
        margin-top: 2rem;
    }

    .filter {
       margin-right: 2rem;
       text-align: center;
       align-items: center;
       justify-content: center;
       opacity: 0.7;
    }

    .filter:hover{
        opacity: 1;
        cursor: pointer;
    }

    .img{
        /* margin-left: 1rem; */
    }
</style>

<body>
    <!-- <form method="get" action="/listings/new" >
        <button>Add Listing</button>
    </form> -->

   <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 row-cols-xs-1 mt-3">
    <% for(let listing of allListings) { %>
            <a href="/listings/<%= listing._id %>" class="listing-link">
                <div class="card col listing-card ">
                    <img src="<%= listing.image %>" class="card-img-top" alt="listing_img" style="height: 20rem;" onerror="this.onerror=null;this.src='/images/default.jpg';">
                    <div class="card-body">
                        <div class="card-img-overlay">
                         </div>
                      <p class="card-text"> <b><%= listing.title %> </b> <br />
                       &#8377; <%= listing.price%>/night <br />
                    </div>
            
            </div>
            </a>
        <% } %>
   </div>
    


   
    
</body>
</html>